<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Career Assistant AI Agent â€” Architecture Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <style>
        body { 
            display: flex; flex-direction: column; align-items: center; 
            background: #fff; font-family: 'Segoe UI', sans-serif; padding: 30px; 
        }
        h1 { color: #1a1a2e; margin-bottom: 0; }
        h2 { color: #555; font-weight: normal; margin-top: 4px; }
        .mermaid { max-width: 900px; }
    </style>
</head>
<body>
    <h1>Career Assistant AI Agent</h1>
    <h2>System Architecture &amp; LangGraph Flow</h2>

    <div class="mermaid">
    graph TD
        A["ğŸ“© Employer Message<br/>(Gradio Chat UI)"] -->|input| B["ğŸ¤– Career Worker<br/>(GPT-4o-mini)"]
        B -->|"tool calls?"| C{"Tool Calls?"}
        C -->|Yes| D["ğŸ”§ Tool Handler"]
        C -->|No| E["ğŸ“Š Response Evaluator<br/>(LLM-as-Judge)"]
        D --> D1["ğŸ“§ send_email_notification"]
        D --> D2["âš ï¸ flag_unknown_question"]
        D --> D3["âœ… notify_response_approved"]
        D -->|"results"| B
        E -->|"Structured Output<br/>(Pydantic)"| F{"Score â‰¥ 7?"}
        F -->|"âœ… Yes"| G["âœ… Approved<br/>Email Notification Sent"]
        F -->|"âŒ No"| H{"Revisions < 3?"}
        H -->|"Yes"| I["ğŸ”„ Revise<br/>(feedback injected)"]
        H -->|"No"| J["âš ï¸ Accept as-is<br/>(max revisions reached)"]
        I -->|"increment counter"| B
        G --> K["ğŸ“¨ Return Response<br/>to Employer"]
        J --> K

        style A fill:#e8f4f8,stroke:#2196F3,stroke-width:2px
        style B fill:#bbdefb,stroke:#1565C0,stroke-width:2px
        style D fill:#c8e6c9,stroke:#388E3C,stroke-width:2px
        style E fill:#ffe0b2,stroke:#E65100,stroke-width:2px
        style G fill:#c8e6c9,stroke:#388E3C,stroke-width:2px
        style J fill:#fff9c4,stroke:#F57F17,stroke-width:2px
        style I fill:#f3e5f5,stroke:#7B1FA2,stroke-width:2px
        style K fill:#e8f5e9,stroke:#2E7D32,stroke-width:2px
    </div>

    <br/>
    <div class="mermaid">
    graph LR
        subgraph Evaluation Criteria
            EC1["âœ… Professional Tone"]
            EC2["âœ… Clarity"]
            EC3["âœ… Completeness"]
            EC4["âœ… Safety"]
            EC5["âœ… Relevance"]
        end
        subgraph Tools
            T1["ğŸ“§ Email Notification<br/>(Gmail SMTP)"]
            T2["âš ï¸ Unknown Question<br/>Flag"]
            T3["ğŸ“© New Message<br/>Alert"]
        end

        style EC1 fill:#e8f5e9,stroke:#43A047
        style EC2 fill:#e8f5e9,stroke:#43A047
        style EC3 fill:#e8f5e9,stroke:#43A047
        style EC4 fill:#e8f5e9,stroke:#43A047
        style EC5 fill:#e8f5e9,stroke:#43A047
        style T1 fill:#e3f2fd,stroke:#1E88E5
        style T2 fill:#fff3e0,stroke:#EF6C00
        style T3 fill:#e3f2fd,stroke:#1E88E5
    </div>

    <script>mermaid.initialize({startOnLoad: true, theme: 'default'});</script>
</body>
</html>
